# EvoAlpha OS æ•°æ®é‡‡é›†ç³»ç»Ÿ - æ¶æ„è®¾è®¡æ–‡æ¡£

> **ç‰ˆæœ¬**: v2.1.0 - å¢é‡æ›´æ–°ä¸è‡ªåŠ¨åŒ–ç‰ˆ
> **æ›´æ–°æ—¶é—´**: 2026-01-19

---

## ğŸ“‹ ç›®å½•

1. [ç³»ç»Ÿæ¦‚è¿°](#ç³»ç»Ÿæ¦‚è¿°)
2. [æ¶æ„è®¾è®¡](#æ¶æ„è®¾è®¡)
3. [æ ¸å¿ƒæ¨¡å—](#æ ¸å¿ƒæ¨¡å—)
4. [æ•°æ®æµ](#æ•°æ®æµ)
5. [æŠ€æœ¯æ ˆ](#æŠ€æœ¯æ ˆ)
6. [è®¾è®¡æ¨¡å¼](#è®¾è®¡æ¨¡å¼)
7. [æ€§èƒ½ä¼˜åŒ–](#æ€§èƒ½ä¼˜åŒ–)

---

## ç³»ç»Ÿæ¦‚è¿°

### è®¾è®¡ç›®æ ‡

EvoAlpha OS æ•°æ®é‡‡é›†ç³»ç»Ÿçš„æ ¸å¿ƒè®¾è®¡ç›®æ ‡ï¼š

1. **é«˜å¯ç»´æŠ¤æ€§**: æ¨¡å—åŒ–è®¾è®¡ï¼Œä»£ç é‡å¤ç‡ <5%
2. **é«˜å¯é æ€§**: ç»Ÿä¸€çš„é”™è¯¯å¤„ç†ã€é‡è¯•æœºåˆ¶ã€æ–­ç‚¹ç»­ä¼ 
3. **é«˜æ€§èƒ½**: å¢é‡æ›´æ–°ã€æ‰¹é‡å¤„ç†ã€è¿æ¥æ± ç®¡ç†
4. **æ˜“æ‰©å±•æ€§**: åŸºäºç»§æ‰¿çš„æ¶æ„ï¼Œæ–°å¢é‡‡é›†å™¨åªéœ€å®ç°æ ¸å¿ƒæ–¹æ³•
5. **è‡ªåŠ¨åŒ–**: æ”¯æŒå®šæ—¶è°ƒåº¦ï¼Œæ— äººå€¼å®ˆè¿è¡Œ

### æ ¸å¿ƒç‰¹æ€§

#### âœ… å·²å®ç°ç‰¹æ€§ (v2.1.0)

- âœ… ç»Ÿä¸€çš„ `BaseCollector` åŸºç±»æ¶æ„
- âœ… ç½‘ç»œæ€¥æ•‘åŒ…ï¼ˆå¤„ç† VPN/SSL é—®é¢˜ï¼‰
- âœ… æŒ‡æ•°é€€é¿é‡è¯•ç®—æ³•
- âœ… **å¢é‡æ›´æ–°æœºåˆ¶** â­ æ–°å¢
- âœ… **å®šæ—¶é‡‡é›†è°ƒåº¦å™¨** â­ æ–°å¢
- âœ… **åˆå§‹åŒ–æ•°æ®é‡‡é›†** â­ æ–°å¢
- âœ… æ–­ç‚¹ç»­ä¼ æ”¯æŒ
- âœ… å¥åº·æ£€æŸ¥æœºåˆ¶
- âœ… ç»Ÿä¸€çš„æ—¥å¿—å’Œç›‘æ§
- âœ… è‡ªåŠ¨æ•°æ®å»é‡
- âœ… å®Œå–„çš„é”™è¯¯å¤„ç†

---

## æ¶æ„è®¾è®¡

### åˆ†å±‚æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         åº”ç”¨å±‚ (Application Layer)          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚ ä¾¿æ·è„šæœ¬ (Shell Scripts)             â”‚  â”‚
â”‚   â”‚  - init_data.sh                      â”‚  â”‚
â”‚   â”‚  - start_scheduler.sh                â”‚  â”‚
â”‚   â”‚  - run_daily_collection.sh           â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚ å®šæ—¶è°ƒåº¦å™¨ (Scheduler)                â”‚  â”‚
â”‚   â”‚  - æ¯æ—¥/æ¯æœˆ/æ¯å­£åº¦è‡ªåŠ¨è§¦å‘            â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         ä¸šåŠ¡é€»è¾‘å±‚ (Business Layer)         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   StockKlineCollector               â”‚   â”‚
â”‚  â”‚   SectorKlineCollector              â”‚   â”‚
â”‚  â”‚   ETFKlineCollector                 â”‚   â”‚
â”‚  â”‚   ... (12ä¸ªé‡‡é›†å™¨)                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         æ¡†æ¶å±‚ (Framework Layer)           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   BaseCollector (åŸºç±»)              â”‚   â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚   â”‚ _retry_call()               â”‚  â”‚   â”‚
â”‚  â”‚   â”‚ save_with_deduplication()   â”‚  â”‚   â”‚
â”‚  â”‚   â”‚ _health_check()             â”‚  â”‚   â”‚
â”‚  â”‚   â”‚ get_last_update_date()      â”‚  â”‚   â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       åŸºç¡€è®¾æ–½å±‚ (Infrastructure Layer)     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ç½‘ç»œå·¥å…· (network_utils.py)        â”‚   â”‚
â”‚  â”‚  è·¯å¾„å·¥å…· (path_utils.py)           â”‚   â”‚
â”‚  â”‚  æ—¥å¿—å·¥å…· (logger_utils.py)         â”‚   â”‚
â”‚  â”‚  å¼‚å¸¸å·¥å…· (exception_utils.py)      â”‚   â”‚
â”‚  â”‚  é…ç½®ç®¡ç† (collector_config.py)     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æ ¸å¿ƒæ¨¡å—

### 1. æ¡†æ¶å±‚ (core/)

#### BaseCollector - åŸºç¡€é‡‡é›†å™¨

**èŒè´£**: æä¾›ç»Ÿä¸€çš„é‡‡é›†æ¡†æ¶å’Œé€šç”¨åŠŸèƒ½

**æ ¸å¿ƒæ–¹æ³•**:

```python
class BaseCollector:
    def _retry_call()           # é‡è¯•æœºåˆ¶ï¼ˆæŒ‡æ•°é€€é¿ï¼‰
    def save_with_deduplication()  # å»é‡ä¿å­˜
    def _health_check()         # å¥åº·æ£€æŸ¥
    def log_collection_start()  # è®°å½•å¼€å§‹
    def log_collection_end()    # è®°å½•ç»“æŸ
    def get_collection_statistics()  # è·å–ç»Ÿè®¡
```

**æ–°å¢æ–¹æ³• (v2.1.0)**:

```python
def get_last_update_date()    # è·å–æœ€åæ›´æ–°æ—¥æœŸ â­
def clean_old_data()          # æ¸…ç†è¿‡æœŸæ•°æ®
def get_last_dates()          # è·å–å¤šè¡Œæœ€åæ—¥æœŸ â­
def get_last_date()           # è·å–å•è¡Œæœ€åæ—¥æœŸ â­
```

### 2. å…¬å…±å·¥å…·å±‚ (common/)

#### network_utils.py - ç½‘ç»œå·¥å…·

```python
def setup_network_emergency_kit():
    """ç½‘ç»œæ€¥æ•‘åŒ… - å¤„ç†VPNå’ŒSSLé—®é¢˜"""
    # æ¸…é™¤ä»£ç†
    # å¿½ç•¥SSLè¯ä¹¦éªŒè¯
```

#### path_utils.py - è·¯å¾„å·¥å…·

```python
def setup_backend_path():
    """è‡ªåŠ¨æ·»åŠ backendç›®å½•åˆ°Pythonè·¯å¾„"""
```

#### logger_utils.py - æ—¥å¿—å·¥å…·

```python
def setup_logger(name):
    """åˆ›å»ºç»Ÿä¸€çš„logger"""
```

#### exception_utils.py - å¼‚å¸¸ç±»

```python
class CollectorException(Exception)     # åŸºç¡€å¼‚å¸¸
class NetworkError(CollectorException)    # ç½‘ç»œé”™è¯¯
class DataSourceError(CollectorException) # æ•°æ®æºé”™è¯¯
```

### 3. é…ç½®å±‚ (config/)

#### collector_config.py - é‡‡é›†å™¨é…ç½®

```python
class CollectorConfig:
    REQUEST_TIMEOUT = 30
    REQUEST_DELAY = 0.5
    MAX_RETRIES = 3
```

#### collection_schedule.yaml - é‡‡é›†è°ƒåº¦é…ç½® â­ æ–°å¢

å®šä¹‰æ¯æ—¥/æ¯æœˆ/æ¯å­£åº¦é‡‡é›†ä»»åŠ¡é…ç½®ã€‚

### 4. ä¸šåŠ¡å±‚ (collectors/)

#### é‡‡é›†å™¨åˆ†ç±»

**Batch 1: ç®€å•é‡‡é›†å™¨** (3ä¸ª)
- StockValuationCollector
- MacroDataCollector
- LimitBoardsCollector

**Batch 2: Kçº¿é‡‡é›†å™¨** (3ä¸ª)
- StockKlineCollector
- SectorKlineCollector
- ETFKlineCollector

**Batch 3: å¤æ‚é‡‡é›†å™¨** (5ä¸ª)
- FundHoldingsCollector
- NorthboundHoldingsCollector
- ETFInfoCollector
- FinanceSummaryCollector
- NewsCollector
- StockSectorListCollector

### 5. å·¥å…·å±‚ (utils/ & scripts/)

#### scheduler.py - å®šæ—¶è°ƒåº¦å™¨ â­ æ–°å¢

**åŠŸèƒ½**:
- æ”¯æŒæ¯æ—¥/æ¯æœˆ/æ¯å­£åº¦å®šæ—¶ä»»åŠ¡
- ä½¿ç”¨ APScheduler å®ç°
- æ”¯æŒç«‹å³è¿è¡Œæµ‹è¯•æ¨¡å¼

**è°ƒåº¦é…ç½®**:

```python
# æ¯æ—¥é‡‡é›† - å·¥ä½œæ—¥ 15:30
CronTrigger(day_of_week='mon-fri', hour=15, minute=30)

# æ¯æœˆé‡‡é›† - æ¯æœˆ1å· 08:00
CronTrigger(day=1, hour=8, minute=0)

# æ¯å­£åº¦é‡‡é›† - æ¯å­£åº¦15å· 08:00
CronTrigger(month='1,4,7,10', day=15, hour=8, minute=0)
```

#### init_data_collection.py - åˆå§‹åŒ–é‡‡é›† â­ æ–°å¢

**åŠŸèƒ½**:
- 5æ­¥å®Œæˆé¦–æ¬¡å…¨é‡é‡‡é›†
- æ”¯æŒåˆ†æ­¥æ‰§è¡Œ
- è¿›åº¦æ˜¾ç¤ºå’Œæ—¶é—´ç»Ÿè®¡

---

## æ•°æ®æµ

### é‡‡é›†æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è§¦å‘é‡‡é›†          â”‚
â”‚  - å®šæ—¶ä»»åŠ¡       â”‚
â”‚  - æ‰‹åŠ¨è°ƒç”¨       â”‚
â”‚  - è„šæœ¬å¯åŠ¨       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å¥åº·æ£€æŸ¥          â”‚
â”‚  - ç½‘ç»œè¿é€šæ€§      â”‚
â”‚  - æ•°æ®åº“è¿æ¥      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è·å–æœ€åæ›´æ–°æ—¥æœŸ  â”‚ â­ å¢é‡æ›´æ–°
â”‚  - æ£€æŸ¥æ•°æ®åº“      â”‚
â”‚  - ç¡®å®šé‡‡é›†èŒƒå›´    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é‡‡é›†æ•°æ®          â”‚
â”‚  - APIè°ƒç”¨        â”‚
â”‚  - é‡è¯•æœºåˆ¶        â”‚
â”‚  - é€Ÿç‡é™åˆ¶        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ•°æ®å¤„ç†          â”‚
â”‚  - å­—æ®µæ˜ å°„        â”‚
â”‚  - ç±»å‹è½¬æ¢        â”‚
â”‚  - æ•°æ®æ¸…æ´—        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å»é‡ä¿å­˜          â”‚
â”‚  - åˆ é™¤æ—§æ•°æ®      â”‚
â”‚  - æ’å…¥æ–°æ•°æ®      â”‚
â”‚  - äº‹åŠ¡ä¿è¯        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è®°å½•æ—¥å¿—          â”‚
â”‚  - é‡‡é›†ç»Ÿè®¡        â”‚
â”‚  - é”™è¯¯æ—¥å¿—        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å¢é‡æ›´æ–°æµç¨‹ â­ æ–°å¢

```
æ•°æ®åº“è¡¨ (æœ‰å†å²æ•°æ®)
         â”‚
         â–¼
æŸ¥è¯¢: MAX(trade_date) â†’ last_date
         â”‚
         â–¼
åˆ¤æ–­: last_date >= today ?
    â”‚              â”‚
   æ˜¯              å¦
    â”‚              â”‚
    â–¼              â–¼
  è·³è¿‡          last_date + 1
    â”‚              â”‚
    â”‚              â–¼
    â”‚         é‡‡é›†èŒƒå›´:
    â”‚         start_date ~ today
    â”‚              â”‚
    â”‚              â–¼
    â”‚         APIè°ƒç”¨
    â”‚              â”‚
    â”‚              â–¼
    â”‚         ä¿å­˜æ–°æ•°æ®
    â”‚              â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æŠ€æœ¯æ ˆ

### æ ¸å¿ƒä¾èµ–

| ç»„ä»¶ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| Python | 3.8+ | è¿è¡Œç¯å¢ƒ |
| pandas | 2.0+ | æ•°æ®å¤„ç† |
| SQLAlchemy | 2.0+ | æ•°æ®åº“ORM |
| akshare | 1.12+ | æ•°æ®æºAPI |
| APScheduler | 3.10+ | å®šæ—¶è°ƒåº¦ â­ |
| SQLite | 3.x | æ•°æ®åº“ |

### è®¾è®¡æ¨¡å¼

#### 1. æ¨¡æ¿æ–¹æ³•æ¨¡å¼

```python
class BaseCollector:
    def run(self):  # æ¨¡æ¿æ–¹æ³•
        self._health_check()
        self._init_table()
        self.fetch_data()
        self.save_data()
```

#### 2. ç­–ç•¥æ¨¡å¼

ä¸åŒçš„é‡‡é›†å™¨å®ç°ä¸åŒçš„é‡‡é›†ç­–ç•¥ï¼Œä½†éµå¾ªç›¸åŒæ¥å£ã€‚

#### 3. å·¥å‚æ¨¡å¼

```python
# æ ¹æ®é…ç½®åˆ›å»ºé‡‡é›†å™¨
def create_collector(name):
    collectors = {
        'stock_kline': StockKlineCollector,
        'news': NewsCollector,
        ...
    }
    return collectors[name]()
```

---

## è®¾è®¡æ¨¡å¼

### 1. å¢é‡æ›´æ–°è®¾è®¡

#### ç­–ç•¥1: æ£€æŸ¥æœ€åæ—¥æœŸ

```python
# é€‚ç”¨äº: StockKline, SectorKline, ETFKline
def get_last_dates():
    """è¿”å›: {symbol: last_date}"""
    query = "SELECT symbol, MAX(trade_date) FROM table GROUP BY symbol"
```

**ä¼˜åŠ¿**:
- æ¯ä¸ªè‚¡ç¥¨ç‹¬ç«‹æ›´æ–°
- æ”¯æŒéƒ¨åˆ†å¤±è´¥
- çµæ´»æ€§é«˜

#### ç­–ç•¥2: åˆ é™¤ä»Šæ—¥æ•°æ®

```python
# é€‚ç”¨äº: StockValuation
DELETE FROM table WHERE trade_date = today
INSERT INTO table VALUES (...today's data...)
```

**ä¼˜åŠ¿**:
- ç®€å•ç›´æ¥
- å¹‚ç­‰æ€§
- é€‚åˆæ¯æ—¥å¿«ç…§æ•°æ®

#### ç­–ç•¥3: æ£€æŸ¥æ˜¯å¦å­˜åœ¨

```python
# é€‚ç”¨äº: FinanceSummary, FundHoldings
SELECT 1 FROM table WHERE quarter = '2024Q3' LIMIT 1
if exists: è·³è¿‡
else: é‡‡é›†
```

**ä¼˜åŠ¿**:
- æŒ‰å­£åº¦æ£€æŸ¥
- é¿å…é‡å¤é‡‡é›†
- é€‚åˆä½é¢‘æ•°æ®

### 2. é”™è¯¯å¤„ç†ç­–ç•¥

#### é‡è¯•æœºåˆ¶

```python
def _retry_call(func, *args, **kwargs):
    for attempt in range(max_retries):
        try:
            return func(*args, **kwargs)
        except Exception as e:
            if attempt == max_retries - 1:
                raise
            delay = RETRY_DELAY * (2 ** attempt)  # æŒ‡æ•°é€€é¿
            time.sleep(delay)
```

#### å¥åº·æ£€æŸ¥

```python
def _health_check():
    # 1. æ£€æŸ¥ç½‘ç»œè¿é€šæ€§
    # 2. æ£€æŸ¥æ•°æ®åº“è¿æ¥
    # 3. æ£€æŸ¥ç£ç›˜ç©ºé—´
```

---

## æ€§èƒ½ä¼˜åŒ–

### v2.1.0 ä¼˜åŒ–æˆæœ

#### å¢é‡æ›´æ–°ä¼˜åŒ–

| é‡‡é›†å™¨ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æå‡ |
|--------|--------|--------|------|
| StockKline | 3-4å°æ—¶ | 5-10åˆ†é’Ÿ | **97%** |
| ETFKline | 10-15åˆ†é’Ÿ | 2-5åˆ†é’Ÿ | **70%** |
| LimitBoards | 5åˆ†é’Ÿ | 1-2åˆ†é’Ÿ | **70%** |
| News | 10-20åˆ†é’Ÿ | 2-3åˆ†é’Ÿ | **85%** |

#### å®šæ—¶é‡‡é›†ä¼˜åŒ–

| ä»»åŠ¡ç±»å‹ | é¢‘ç‡ | è€—æ—¶ | è¯´æ˜ |
|---------|------|------|------|
| æ¯æ—¥é‡‡é›† | æ¯å¤© | 15-30åˆ†é’Ÿ | è‡ªåŠ¨å¢é‡ |
| æ¯æœˆé‡‡é›† | æ¯æœˆ | 25-40åˆ†é’Ÿ | è‡ªåŠ¨å¢é‡ |
| æ¯å­£åº¦ | æ¯å­£åº¦ | 2-3.5å°æ—¶ | è‡ªåŠ¨æ£€æŸ¥ |

### æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | æ•°å€¼ | è¯´æ˜ |
|------|------|------|
| ä»£ç é‡å¤ç‡ | <5% | ä»80%é™è‡³5% |
| APIè°ƒç”¨å‡å°‘ | 97% | å¢é‡æ›´æ–°æ¨¡å¼ |
| é‡‡é›†æˆåŠŸç‡ | >95% | é‡è¯•æœºåˆ¶ä¿éšœ |
| æ•°æ®å®Œæ•´æ€§ | 100% | äº‹åŠ¡+å»é‡ |

---

## æ‰©å±•æ€§è®¾è®¡

### æ–°å¢é‡‡é›†å™¨æ­¥éª¤

#### Step 1: åˆ›å»ºé‡‡é›†å™¨ç±»

```python
from data_job.core.base_collector import BaseCollector

class MyCollector(BaseCollector):
    def __init__(self):
        super().__init__(
            collector_name="my_data",
            request_timeout=30,
            request_delay=0.5
        )

    def _init_table(self):
        """åˆ›å»ºè¡¨"""
        pass

    def fetch_data(self):
        """è·å–æ•°æ®"""
        pass

    def process_data(self, df):
        """å¤„ç†æ•°æ®"""
        pass

    def save_data(self, df):
        """ä¿å­˜æ•°æ®"""
        pass

    def run(self):
        """æ‰§è¡Œé‡‡é›†"""
        pass
```

#### Step 2: æ·»åŠ åˆ°è°ƒåº¦å™¨ï¼ˆå¯é€‰ï¼‰

```python
# ç¼–è¾‘ utils/scheduler.py
from data_job.collectors import MyCollector

def run_custom_collection():
    collector = MyCollector()
    collector.run()
```

#### Step 3: æµ‹è¯•

```bash
python -m data_job.collectors.my_collector
```

---

## ç›‘æ§ä¸æ—¥å¿—

### æ—¥å¿—çº§åˆ«

- **INFO**: æ­£å¸¸æµç¨‹æ—¥å¿—
- **WARNING**: è­¦å‘Šä¿¡æ¯ï¼ˆå¦‚æ— æ•°æ®ï¼‰
- **ERROR**: é”™è¯¯ä¿¡æ¯
- **DEBUG**: è°ƒè¯•ä¿¡æ¯ï¼ˆå¼€å‘æ—¶ä½¿ç”¨ï¼‰

### æ—¥å¿—ä½ç½®

```
backend/
â”œâ”€â”€ logs/
â”‚   â”œâ”€â”€ scheduled_collections/    â† å®šæ—¶ä»»åŠ¡æ—¥å¿—
â”‚   â””â”€â”€ *.log                      â† å„é‡‡é›†å™¨æ—¥å¿—
```

### ç›‘æ§æŒ‡æ ‡

- é‡‡é›†æˆåŠŸç‡
- å¹³å‡é‡‡é›†æ—¶é—´
- APIè°ƒç”¨æ¬¡æ•°
- æ•°æ®è´¨é‡æŒ‡æ ‡

---

## å®‰å…¨æ€§

### ç½‘ç»œå®‰å…¨

- SSLè¯ä¹¦å¤„ç†
- ä»£ç†æ¸…é™¤
- è¶…æ—¶æ§åˆ¶

### æ•°æ®å®‰å…¨

- äº‹åŠ¡ä¿è¯
- å»é‡æœºåˆ¶
- å¤‡ä»½å»ºè®®

---

## ç‰ˆæœ¬å†å²

### v2.1.0 (2026-01-19)

**æ–°å¢**:
- âœ¨ å¢é‡æ›´æ–°æœºåˆ¶
- ğŸš€ å®šæ—¶é‡‡é›†è°ƒåº¦å™¨
- ğŸ“¦ åˆå§‹åŒ–æ•°æ®é‡‡é›†è„šæœ¬
- ğŸ› ï¸ ä¾¿æ·è¿è¡Œè„šæœ¬

**ä¼˜åŒ–**:
- âš¡ æ€§èƒ½æå‡90%+
- ğŸ“‰ APIè°ƒç”¨å‡å°‘97%

### v2.0.0 (2026-01-19)

**åˆå§‹ç‰ˆæœ¬**:
- ç»Ÿä¸€BaseCollectoræ¡†æ¶
- 12ä¸ªé‡‡é›†å™¨é‡æ„å®Œæˆ
- ä»£ç é‡å¤ç‡<5%

---

## æ€»ç»“

EvoAlpha OS æ•°æ®é‡‡é›†ç³»ç»Ÿé‡‡ç”¨åˆ†å±‚æ¶æ„ï¼Œå…·æœ‰é«˜åº¦çš„å¯ç»´æŠ¤æ€§ã€å¯æ‰©å±•æ€§å’Œå¯é æ€§ã€‚

### å…³é”®ä¼˜åŠ¿

1. **æ¨¡å—åŒ–è®¾è®¡** - ä»£ç æ¸…æ™°ï¼Œæ˜“äºç»´æŠ¤
2. **å¢é‡æ›´æ–°** - æ€§èƒ½ä¼˜å¼‚ï¼ŒèŠ‚çœèµ„æº
3. **è‡ªåŠ¨åŒ–** - å®šæ—¶è°ƒåº¦ï¼Œæ— äººå€¼å®ˆ
4. **å¯æ‰©å±•** - æ–°å¢é‡‡é›†å™¨ç®€å•å¿«æ·

### é€‚ç”¨åœºæ™¯

- âœ… è‚¡ç¥¨æ•°æ®é‡‡é›†
- âœ… å®è§‚ç»æµæ•°æ®é‡‡é›†
- âœ… æ–°é—»èˆ†æƒ…é‡‡é›†
- âœ… è´¢åŠ¡æ•°æ®é‡‡é›†
- âœ… ETFæ•°æ®é‡‡é›†

---

**æ–‡æ¡£ç‰ˆæœ¬**: v2.1.0
**æœ€åæ›´æ–°**: 2026-01-19
**ç»´æŠ¤è€…**: EvoAlpha OS Team
