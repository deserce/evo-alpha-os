# EvoAlpha OS - 技术蓝图 v1.0

> **进化即自由 (Evolution is Freedom)**
> **创建时间**：2025-01-18
> **最后更新**：2025-01-18
> **状态**：✅ 已定稿

---

## 📋 目录

- [一、项目定位](#一项目定位)
- [二、技术架构](#二技术架构)
- [三、数据层设计](#三数据层设计)
- [四、功能模块](#四功能模块)
- [五、开发计划](#五开发计划)
- [六、关键决策记录](#六关键决策记录)

---

## 一、项目定位

### 1.1 核心信息

- **项目名称**：EvoAlpha OS (Evolution Alpha Operating System)
- **品牌**：dlab (Evolution Lab)
- **Slogan**：进化即自由 (Evolution is Freedom)
- **定位**：个人投资者的 Alpha 机会发现平台
- **核心理念**：量化筛选做减法，AI Agent 做加法

### 1.2 目标用户

- **核心用户**：个人投资者 + 小圈子（朋友圈）
- **扩展用户**：对量化投资感兴趣的散户
- **社群模式**：dlab 俱乐部（付费会员）

### 1.3 商业模式

| 版本 | 价格 | 权限 |
|------|------|------|
| 免费版 | ¥0 | Top 3 机会 + 基础功能 |
| Pro版 | ¥199/月 | 全部机会 + AI 分析 + 日报推送 |
| VIP版 | ¥999/季 | Pro 全部 + 1对1 咨询 + 定制策略 |

---

## 二、技术架构

### 2.1 三段式架构（最终确定）

```
┌─────────────────────────────────────────────────┐
│                   用户层                         │
│  前端 (Next.js) - 部署在 Vercel                  │
│  - 公开页面：首页部分机会                        │
│  - 登录后：完整功能                              │
└───────────────────┬─────────────────────────────┘
                      │ REST API
  ┌───────────────────▼─────────────────────────────┐
│                API 网关层                         │
│  后端 (FastAPI) - 部署在云端 VPS                  │
│  - 接收前端请求                                   │
│  - 调用云端数据库                                 │
│  - 调用 AI 服务                                   │
└───────────────────┬─────────────────────────────┘
                      │
       ┌──────────────┴──────────────┐
       │                             │
┌──────▼──────────┐         ┌────────▼──────┐
│  云端数据库      │         │  外部服务     │
│  CockroachDB    │         │  - GLM-4 API  │
│  (存储近2年数据) │         │  - Resend     │
└─────────────────┘         └───────────────┘

┌─────────────────────────────────────────────────┐
│              本地工厂 (MBP)                       │
│  1. 数据采集 (AkShare)                           │
│     ↓                                            │
│  2. 本地计算 (量化引擎、策略)                      │
│     ↓                                            │
│  3. SQLite 存储 (全量历史数据)                    │
│     ↓                                            │
│  4. CSV 导出 (定期打包)                           │
│     ↓                                            │
│  5. 上传到 R2 (Cloudflare R2 对象存储)            │
│     ↓                                            │
│  6. 触发云端 IMPORT ( CockroachDB 批量导入)       │
└─────────────────────────────────────────────────┘
```

### 2.2 技术栈

#### 前端
- **框架**：Next.js 16 (App Router)
- **语言**：TypeScript
- **样式**：TailwindCSS
- **图表**：ECharts + Recharts
- **状态管理**：Zustand
- **部署**：Vercel (免费额度)

#### 后端（云端）
- **框架**：FastAPI 0.115+
- **Python**：3.10+
- **数据库**：CockroachDB Serverless
- **AI**：智谱 GLM-4 API
- **邮件**：Resend API
- **部署**：Railway / Render (按需付费)

#### 后端（本地工厂）
- **语言**：Python 3.10+
- **数据库**：SQLite 3 (本地全量存储)
- **数据源**：AkShare
- **计算**：Pandas / NumPy
- **存储**：CSV 导出 + Cloudflare R2

### 2.3 数据流转

**日常增量更新流程**（每日收盘后）：

```
1. MBP 本地采集当日数据
   ├── 个股 K 线
   ├── 板块 K 线
   ├── ETF 行情
   └── 新闻舆情

2. 本地计算
   ├── RPS 因子
   ├── 策略信号
   └── Alpha 机会

3. 双写模式
   ├── 写入本地 SQLite (全量)
   └── 通过 API 写入云端 CockroachDB (近2年)

4. 用户访问
   └── 前端 → 云端 API → 云端数据库 → 返回结果
```

**初始化/全量更新流程**（新环境或数据修复）：

```
1. MBP 全量下载历史数据 → 本地 SQLite

2. 导出为 CSV 文件（压缩分卷）

3. 上传 CSV 到 Cloudflare R2

4. 触发 CockroachDB IMPORT 指令
   └── 一次性导入全部历史数据（低 RU 成本）
```

---

## 三、数据层设计

### 3.1 数据更新策略

| 数据类型 | 更新频率 | 触发时间 | 存储时长 |
|---------|---------|---------|---------|
| 股票名单 | 按季度 | 每季度首月 | 近2年 |
| 财报数据 | 按季度 | 财报发布后 | 近2年 |
| 个股 K 线 | 每日 | 收盘后 15:30 | 近2年 |
| 板块 K 线 | 每日 | 收盘后 15:30 | 近2年 |
| ETF 行情 | 每日 | 收盘后 15:30 | 近2年 |
| 新闻舆情 | 每日 | 定时抓取 | 近2年 |
| RPS 因子 | 每日 | K 线更新后 | 近2年 |
| 策略信号 | 每日 | 因子计算后 | 近2年 |
| Alpha 机会 | 每日 | 策略运行后 | 近2年 |

### 3.2 本地工厂职责

**MBP 本地运行**的模块：

```
backend/
├── data_job/              # 数据采集
│   ├── update_stock_list.py    # 股票名单（季度）
│   ├── update_kline.py         # K 线数据（每日）
│   ├── update_news.py          # 新闻舆情（每日）
│   └── update_finance.py       # 财报数据（季度）
│
├── quant_engine/          # 量化引擎
│   ├── features/               # 因子计算
│   │   ├── calc_rps.py         # RPS 因子
│   │   └── calc_indicators.py  # 技术指标
│   ├── pool/                   # 股票池
│   │   └── maintain_pool.py    # 核心池维护
│   └── strategies/             # 策略执行
│       ├── mrgc_strategy.py    # MRGC 策略
│       └── sector_resonance.py # 板块共振
│
└── app/sync/              # 同步模块
    ├── csv_exporter.py          # 导出 CSV
    ├── r2_manager.py            # 上传 R2
    └── cloud_importer.py        # 云端导入
```

### 3.3 云端后端职责

**云端 VPS 运行**的模块：

```
backend/
└── app/
    ├── api/                  # API 接口
    │   ├── alpha.py          # Alpha 机会相关
    │   ├── stock.py          # 个股相关
    │   ├── sector.py         # 板块相关
    │   ├── etf.py            # ETF 相关
    │   ├── report.py         # 日报相关
    │   └── ai.py             # AI 分析相关
    │
    ├── agents/               # AI Agent
    │   ├── master_agents.py  # 大师 Agent（陶博士、简放）
    │   ├── functional_agents.py  # 功能 Agent（基本面、舆情）
    │   └── report_agents.py  # 报告生成 Agent
    │
    ├── core/                 # 核心配置
    │   ├── config.py         # 配置管理
    │   ├── database.py       # 数据库连接
    │   └── cloud_db.py       # 云端数据库
    │
    └── scheduler/            # 定时任务
        ├── daily_job.py      # 每日任务
        └── email_sender.py   # 邮件推送
```

### 3.4 数据库设计

**核心数据表**（16张）：

#### 基础数据表
```sql
-- 股票基本信息
stock_info (
    symbol, name, industry, list_date, market
)

-- 个股日线
stock_daily_prices (
    symbol, trade_date, open, high, low, close, volume, amount
)

-- 板块日线
sector_daily_prices (
    sector_name, trade_date, open, high, low, close, volume
)

-- 股票-板块映射
stock_sector_map (
    symbol, sector_name, weight
)
```

#### 量化因子表
```sql
-- 个股 RPS
quant_feature_rps (
    symbol, trade_date,
    rps_5, rps_10, rps_20, rps_50, rps_120, rps_250,
    ma_20, ma_50, ma_250
)

-- 板块 RPS
quant_feature_sector_rps (
    sector_name, trade_date, rps_20, rps_50
)

-- 股票池
quant_stock_pool (
    pool_name, symbol, reason, add_date
)

-- 策略结果
quant_strategy_results (
    strategy_name, trade_date, symbol, signal_type, meta_info
)
```

#### 新闻舆情表
```sql
-- 新闻文章
news_articles (
    article_id, title, content, source, publish_time, url
)

-- 新闻-股票关联
news_stock_relation (
    article_id, symbol, relevance_score
)

-- 情绪关键词
sentiment_keywords (
    keyword, sentiment_type, weight
)
```

#### Alpha 机会表
```sql
-- Alpha 机会列表
alpha_opportunities (
    opportunity_id, trade_date, symbol, opportunity_type,
    confidence_score, reason, status, created_at
)

-- 机会跟踪
opportunity_tracking (
    opportunity_id, update_date, current_price, return_pct, status
)
```

#### AI 分析表
```sql
-- AI 分析缓存
ai_analysis_cache (
    analysis_type, target_id, analysis_result,
    model_version, created_at, expire_at
)
```

#### 日报表
```sql
-- 日报内容
daily_reports (
    report_date, report_type, content,
    market_overview, hot_sectors, alpha_list, created_at
)

-- 发送记录
report_sending_log (
    report_id, recipient, send_time, status, error_msg
)
```

#### ETF 相关表
```sql
-- ETF 基础信息
etf_info (
    symbol, name, fund_type, underlying_index, launch_date
)

-- ETF 行情
etf_daily_prices (
    symbol, trade_date, open, high, low, close, volume
)

-- ETF RPS
etf_feature_rps (
    symbol, trade_date, rps_20, rps_50, rps_250
)

-- 全天候配置记录
all_weather_allocations (
    allocation_date, tech_ratio, dividend_ratio, nasdaq_ratio,
    gold_ratio, soybean_ratio, total_value
)

-- 回测结果
backtest_results (
    backtest_id, strategy_name, start_date, end_date,
    total_return, annual_return, max_drawdown, sharpe_ratio,
    win_rate, total_trades
)

-- 调仓记录
rebalance_records (
    rebalance_date, symbol, action, ratio, reason
)
```

#### 用户系统表（V2.0）
```sql
-- 用户信息
users (
    user_id, email, password_hash, subscription_type,
    subscription_start, subscription_end, created_at
)

-- 订阅管理
subscriptions (
    subscription_id, user_id, plan_type, start_date,
    end_date, amount, payment_method
)
```

---

## 四、功能模块

### 4.1 模块概览

A股系统 = **6 大核心模块**

```
┌─────────────────────────────────────────────────┐
│  模块0: 新闻舆情数据层（基础支撑）                │
├─────────────────────────────────────────────────┤
│  模块1: Alpha 机会雷达（首页核心）                │
├─────────────────────────────────────────────────┤
│  模块2: 个股深度作战室                           │
├─────────────────────────────────────────────────┤
│  模块3: 板块战役指挥所                           │
├─────────────────────────────────────────────────┤
│  模块4: 日报研报系统                             │
├─────────────────────────────────────────────────┤
│  模块5: 量化兵工厂（回测系统）                   │
├─────────────────────────────────────────────────┤
│  模块6: ETF 全天候配置                           │
└─────────────────────────────────────────────────┘
```

### 4.2 模块详细设计

#### 模块0: 新闻舆情数据层

**功能**：
- 数据采集（东方财富、新浪、第一财经）
- 情绪分析（利好/利空提取）
- 催化剂识别（政策/业绩/事件）
- 舆情打分（-10 到 +10）

**输出**：
- 新闻数据表
- 情绪评分
- 催化剂事件列表

---

#### 模块1: Alpha 机会雷达（首页）

**定位**：用户第一眼看到的 Alpha 机会

**页面设计**：
```
┌─────────────────────────────────────────┐
│  [登录前]                                │
│  ┌────────────────────────────────────┐ │
│  │  今日 Alpha 机会 (Top 3)            │ │
│  │  ┌────────┐ ┌────────┐ ┌────────┐ │ │
│  │  │ 股票1  │ │ 股票2  │ │ 股票3  │ │ │
│  │  │ ⭐⭐⭐ │ │ ⭐⭐   │ │ ⭐⭐⭐ │ │ │
│  │  └────────┘ └────────┘ └────────┘ │ │
│  │  [登录查看全部机会]                │ │
│  └────────────────────────────────────┘ │
│                                          │
│  [登录后]                                │
│  ┌────────────────────────────────────┐ │
│  │  今日 Alpha 机会 (全部)            │ │
│  │  [筛选: RPS>90 | 板块共振 | ...]   │ │
│  │  ┌────────┐ ┌────────┐ ...       │ │
│  │  │ 股票1  │ │ 股票2  │           │ │
│  │  │ 详情→  │ │ 详情→  │           │ │
│  │  └────────┘ └────────┘           │ │
│  └────────────────────────────────────┘ │
└─────────────────────────────────────────┘
```

**卡片信息**：
- 股票名称 + 代码
- 置信度评分（⭐ 1-5星）
- 核心亮点（一句话）
- 快速跳转按钮

**点击后**：跳转到个股详情页

---

#### 模块2: 个股深度作战室

**页面结构**：
```
┌─────────────────────────────────────────────────┐
│  股票名称：贵州茅台 (600519)                    │
├───────────────────┬─────────────────────────────┤
│                   │                             │
│  [左侧] K线图表   │  [右侧] AI 深度调研员        │
│  ┌─────────────┐ │  ┌───────────────────────┐  │
│  │             │ │  │ Tab1: 基本面体检       │  │
│  │  K线 + 均线  │ │  │ - 财务数据            │  │
│  │             │ │  │ - 估值分析            │  │
│  │  [副图]     │ │  │ - 机构持仓            │  │
│  │  RPS/成交量 │ │  │                       │  │
│  │             │ │  │ Tab2: 舆情吹哨       │  │
│  └─────────────┘ │  │ - 48h 新闻           │  │
│                   │  │ - 研报观点           │  │
│  [底部] 操作面板  │  │ - 情绪评分           │  │
│  ┌─────────────┐ │  │                       │  │
│  │ [生成研报]  │ │  │ Tab3: 大师会诊       │  │
│  │ [加入自选]  │ │  │ - 陶博士: ...         │  │
│  │ [历史信号]  │ │  │ - 简放: ...           │  │
│  └─────────────┘ │  │ - 巴菲特: ...         │  │
│                   │  │                       │  │
│                   │  │ [AI 分析]  ← 点击生成 │  │
│                   │  └───────────────────────┘  │
└───────────────────┴─────────────────────────────┘
```

**AI 分析**：点击"AI 分析"按钮后触发调用 GLM-4

---

#### 模块3: 板块战役指挥所

**页面结构**：
```
┌─────────────────────────────────────────────────┐
│  板块：低空经济                                  │
├─────────────────────────────────────────────────┤
│                                                 │
│  [上方] 板块指数图                              │
│  ┌─────────────────────────────────────────┐   │
│  │  K线 + 成交量 + 板块宽度指标            │   │
│  └─────────────────────────────────────────┘   │
│                                                 │
│  [下方] 成分股透视                              │
│  ┌─────────────────────────────────────────┐   │
│  │  股票名称  │ RPS │ 涨跌幅 │ 是否龙头  │   │
│  │  股票1     │ 95  │ +5.2% │ 🐲 龙一   │   │
│  │  股票2     │ 88  │ +3.1% │           │   │
│  └─────────────────────────────────────────┘   │
│                                                 │
│  [右侧] AI 面板                                │
│  ┌─────────────────────────────────────────┐   │
│  │  Tab1: 逻辑拆解                         │   │
│  │  Tab2: 产业链图谱                       │   │
│  └─────────────────────────────────────────┘   │
└─────────────────────────────────────────────────┘
```

---

#### 模块4: 日报研报系统

**推送时间**：
- **盘中简报**：11:30（上午收盘）
- **盘后日报**：15:45（收盘后）
- **周末复盘**：周日 20:00

**推送渠道**：
- 邮件订阅（Resend API）
- 未来：微信公众号、知识星球

**日报模板**：
```markdown
# 📊 EvoAlpha 日报 - 2025-01-18 盘后版

## 🌡️ 市场温度
- 涨跌家数：↑3002 / ↓2098
- 涨停家数：42家（封板率78%）
- 连板高度：5连板1只，4连板2只
- 市场情绪：🔥偏热

## 🔥 今日最强风口
- **低空经济**（板块涨幅+4.2%）
  - 龙头：XXX（+10.01%）
  - 驱动：政策利好XX

## 🎯 Alpha 机会榜
1. **贵州茅台**（600519）
   - RPS-20日：95分
   - 陶博士评分：⭐⭐⭐⭐⭐
   - 理由：突破50日均线，基金加仓

## 📰 重要舆情
- 利好：XX政策发布
- 利空：XX板块遭监管

## 💡 ETF 配置建议
- 当前组合：科技30% | 红利30% | 纳指20% | 黄金10% | 豆粕10%
- 调仓信号：[无]

## 📅 明日关注
- XXX公司发布财报
- XX数据公布
```

**功能按钮**：
- [生成 Markdown]
- [发送邮件]
- [查看历史日报]

---

#### 模块5: 量化兵工厂（回测系统）

**完整版功能**：
- 策略选择（MRGC、板块共振）
- 时间范围选择
- 参数设置（RPS 阈值、止损比例）
- 运行回测

**回测报告**：
```
┌─────────────────────────────────────────┐
│  回测报告：MRGC 策略                     │
├─────────────────────────────────────────┤
│  时间范围：2023-01-01 ~ 2024-12-31      │
│                                         │
│  核心指标                               │
│  ┌─────────────────────────────────┐   │
│  │  总收益率：+45.2%                │   │
│  │  年化收益：+18.5%                │   │
│  │  最大回撤：-12.3%                │   │
│  │  夏普比率：1.85                   │   │
│  │  胜率：68.5%                      │   │
│  │  总交易次数：125次                │   │
│  └─────────────────────────────────┘   │
│                                         │
│  [导出报告]  [查看交易记录]             │
└─────────────────────────────────────────┘
```

**深度优化**（后续实现）：
- 参数优化（网格搜索）
- 蒙特卡洛模拟
- 多策略组合回测

---

#### 模块6: ETF 全天候配置

**配置方案**：
```
全天候组合 = 5 类资产

┌─────────────────────────────────────────┐
│  基础组合                               │
│  ┌─────────────────────────────────┐   │
│  │  A股科技（进攻）    30%          │   │
│  │  A股红利（防御）    30%          │   │
│  │  纳指（海外科技）    20%         │   │
│  │  黄金（避险）       10%         │   │
│  │  豆粕（特殊对冲）    10%        │   │
│  └─────────────────────────────────┘   │
│                                         │
│  当前市值：¥100,000                     │
│  今日收益：+¥1,230 (+1.23%)             │
│                                         │
│  [三重动量模型信号]                     │
│  ┌─────────────────────────────────┐   │
│  │  科技：🟢 建议持有               │   │
│  │  红利：🟡 建议减仓               │   │
│  │  纳指：🟢 建议加仓               │   │
│  │  黄金：🔴 建议观望               │   │
│  │  豆粕：🟡 建议减仓               │   │
│  └─────────────────────────────────┘   │
│                                         │
│  [调仓建议]  [历史回测]  [自定义组合]   │
└─────────────────────────────────────────┘
```

---

### 4.3 AI Agent 体系

**4 层 Agent 架构**：

```
第一层：大师级 Agent
├─ 陶博士 Agent（RPS + 口袋支点）
├─ 简放 Agent（趋势交易 + 龙头战法）
├─ 巴菲特 Agent（价值投资 + 护城河）
└─ 欧奈尔 Agent（CAN SLIM）

第二层：功能性 Agent
├─ 基本面体检 Agent（财务分析）
├─ 舆情吹哨 Agent（新闻情绪）
├─ 板块 Agent（板块轮动）
└─ 宏观 Agent（政策分析）

第三层：报告生成 Agent
├─ 日报生成 Agent
├─ 个股研报生成 Agent
└─ 板块研报生成 Agent

第四层：综合决策 Agent
└─ MasterConsultation（大师会诊）
```

**训练计划**（后续实施）：
- 收集陶博士、简放公众号文章
- 收集微博语料
- 构建 RAG 知识库
- Prompt 工程优化

---

## 五、开发计划

### 5.1 总体时间线

**Phase 1：A股系统（1 个月）**

### 5.2 周计划

#### Week 1：基础架构 + 数据层

**目标**：搭建项目骨架，完成数据采集和量化引擎

**Day 1-2：项目初始化**
- [ ] 创建 Git 仓库
- [ ] 初始化 Next.js 前端
- [ ] 初始化 FastAPI 后端（云端）
- [ ] 创建数据库表（16张表）
- [ ] 配置开发环境

**Day 3-4：本地工厂 - 数据采集**
- [ ] 实现 `update_stock_list.py`
- [ ] 实现 `update_kline.py`
- [ ] 实现 `update_news.py`
- [ ] 实现 `update_finance.py`
- [ ] 测试数据采集

**Day 5-7：本地工厂 - 量化引擎**
- [ ] 实现 `calc_rps.py`（RPS 因子）
- [ ] 实现 `calc_indicators.py`（技术指标）
- [ ] 实现 `maintain_pool.py`（股票池）
- [ ] 实现 `mrgc_strategy.py`（MRGC 策略）
- [ ] 实现 `sector_resonance.py`（板块共振）
- [ ] 测试策略运行

**Day 7：同步模块**
- [ ] 实现 `csv_exporter.py`
- [ ] 实现 `r2_manager.py`
- [ ] 实现 `cloud_importer.py`
- [ ] 测试数据同步

#### Week 2：云端后端 + AI Agent

**目标**：完成 API 接口和 AI 分析能力

**Day 8-10：云端后端 - 基础 API**
- [ ] 实现 `config.py`（配置管理）
- [ ] 实现 `cloud_db.py`（云端数据库）
- [ ] 实现 `/api/alpha/opportunities`
- [ ] 实现 `/api/stock/{symbol}/info`
- [ ] 实现 `/api/stock/{symbol}/kline`
- [ ] 实现 `/api/sector/list`

**Day 11-12：AI Agent - 大师 Agent**
- [ ] 实现 `master_agents.py`
- [ ] 设计陶博士 Agent Prompt
- [ ] 设计简放 Agent Prompt
- [ ] 集成 GLM-4 API
- [ ] 实现 `/api/ai/analyze`

**Day 13-14：AI Agent - 功能 Agent**
- [ ] 实现 `functional_agents.py`
- [ ] 实现基本面体检 Agent
- [ ] 实现舆情吹哨 Agent
- [ ] 实现大师会诊（MasterConsultation）
- [ ] 测试 AI 分析

#### Week 3：前端开发

**目标**：完成核心页面，连接后端 API

**Day 15-17：首页（Alpha 机会）**
- [ ] 实现首页布局（公开部分）
- [ ] 实现 AlphaCard 组件
- [ ] 实现机会列表（登录后）
- [ ] 连接后端 API
- [ ] 实现筛选功能

**Day 18-19：ETF 配置页面**
- [ ] 实现布局设计
- [ ] 实现组合展示
- [ ] 实现三重动量信号
- [ ] 连接后端 API

**Day 20-21：个股 + 板块详情页**
- [ ] 实现个股详情页布局
- [ ] 集成 ECharts K线图
- [ ] 实现 AI 分析面板
- [ ] 实现板块详情页
- [ ] 实现龙头识别展示

#### Week 4：日报 + 回测 + 上线

**目标**：完成自动化流程，部署上线

**Day 22-24：日报系统**
- [ ] 实现日报生成逻辑
- [ ] 实现盘中简报
- [ ] 实现盘后日报
- [ ] 集成 Resend 邮件 API
- [ ] 实现定时任务

**Day 25-26：回测系统**
- [ ] 实现回测框架
- [ ] 实现参数设置
- [ ] 生成回测报告
- [ ] 导出功能

**Day 27-28：集成测试**
- [ ] 端到端测试
- [ ] 性能优化
- [ ] Bug 修复
- [ ] 文档完善

**Day 29-30：部署上线**
- [ ] 前端部署到 Vercel
- [ ] 后端部署到 Railway
- [ ] 配置定时任务
- [ ] 配置监控告警
- [ ] 交付验收

---

## 六、关键决策记录

### 6.1 技术架构决策

| 决策项 | 选择 | 理由 | 日期 |
|--------|------|------|------|
| 整体架构 | 三段式（本地工厂 → R2 → 云端） | 数据量大，需要成本优化 | 2025-01-18 |
| 后端部署 | 云端 VPS（Railway/Render） | 方便前端访问，稳定性好 | 2025-01-18 |
| 数据库 | CockroachDB Serverless | 按 RU 计费，成本低 | 2025-01-18 |
| AI 服务 | GLM-4 API | 性价比高，中文友好 | 2025-01-18 |
| 前端部署 | Vercel | 免费额度，性能好 | 2025-01-18 |

### 6.2 功能范围决策

| 决策项 | 选择 | 理由 | 日期 |
|--------|------|------|------|
| AI 功能 | 个股分析、研报、Agent 调用 | 暂不设限，后续优化 | 2025-01-18 |
| 回测系统 | 完整版（含成本、滑点） | 深度功能后续实现 | 2025-01-18 |
| 首页设计 | 部分公开 + 登录后全部 | 引流 + 会员转化 | 2025-01-18 |
| AI 触发 | 点击生成（不自动） | 控制成本 | 2025-01-18 |

### 6.3 数据策略决策

| 决策项 | 选择 | 理由 | 日期 |
|--------|------|------|------|
| 股票名单 | 按季度更新 | 变化频率低 | 2025-01-18 |
| 财报数据 | 按季度更新 | 季报发布周期 | 2025-01-18 |
| K线数据 | 每日更新 | 收盘后采集 | 2025-01-18 |
| 新闻舆情 | 每日更新 | 定时抓取 | 2025-01-18 |
| 存储时长 | 近2年 | 平衡成本和需求 | 2025-01-18 |

### 6.4 待决策事项

| 决策项 | 状态 | 预计决策时间 |
|--------|------|-------------|
| 错误处理方案 | 待定 | Week 2 |
| 数据备份策略 | 待定 | Week 2 |
| AI 成本限额 | 待定 | Week 2 |
| 移动端适配 | 待定 | Week 3 |

---

## 📝 附录

### A. 关键链接

- **GitHub**：（待创建）
- **文档**：（待创建）
- **Demo**：（待部署）

### B. 联系方式

- **品牌**：dlab (Evolution Lab)
- **Email**：（待添加）

### C. 版本历史

- **v1.0** (2025-01-18)：初始版本，完成技术蓝图定稿

---

## ✅ 确认签字

**产品负责人**：______________  日期：______________

**技术负责人**：______________  日期：______________

---

> "进化即自由" - EvoAlpha OS
